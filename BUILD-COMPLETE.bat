@echo off
:: Ø§ÛŒÙ† ÙØ§ÛŒÙ„ Ù‡Ù…Ù‡ Ú©Ø§Ø±Ù‡Ø§ Ø±Ùˆ Ø¨Ù‡ ØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒØ¯Ù‡
:: ÙÙ‚Ø· Ø¯Ø§Ø¨Ù„ Ú©Ù„ÛŒÚ© Ú©Ù† Ùˆ ØµØ¨Ø± Ú©Ù†!

chcp 65001 >nul
cd /d "%~dp0"
cls

echo.
echo â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
echo â•‘                                                       â•‘
echo â•‘      ðŸ“± Ø³Ø§Ø®Øª Ø®ÙˆØ¯Ú©Ø§Ø± APK - Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ø§Ù„ÛŒ        â•‘
echo â•‘                                                       â•‘
echo â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.
echo Ø§ÛŒÙ† ÙØ§ÛŒÙ„ ØªÙ…Ø§Ù… Ù…Ø±Ø§Ø­Ù„ Ø±Ø§ Ø¨Ù‡ ØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒâ€ŒØ¯Ù‡Ø¯:
echo   âœ“ Ø¨Ø±Ø±Ø³ÛŒ Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ÛŒâ€ŒÙ‡Ø§
echo   âœ“ Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡
echo   âœ“ Ø³Ø§Ø®Øª APK
echo   âœ“ Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ù¾ÙˆØ´Ù‡ ÙØ§ÛŒÙ„
echo.
echo Ù„Ø·ÙØ§Ù‹ ØµØ¨Ø± Ú©Ù†ÛŒØ¯...
echo.
timeout /t 3 >nul

:: Ø¨Ø±Ø±Ø³ÛŒ Node.js
echo [1/5] Ø¨Ø±Ø±Ø³ÛŒ Node.js...
where node >nul 2>&1
if errorlevel 1 (
    echo âœ— Node.js ÛŒØ§ÙØª Ù†Ø´Ø¯!
    echo.
    echo Ù„Ø·ÙØ§Ù‹ Node.js Ø±Ø§ Ù†ØµØ¨ Ú©Ù†ÛŒØ¯:
    echo https://nodejs.org/
    echo.
    echo Ø¨Ø¹Ø¯ Ø§Ø² Ù†ØµØ¨ØŒ Ø§ÛŒÙ† ÙØ§ÛŒÙ„ Ø±Ø§ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯.
    pause
    exit /b 1
)
echo âœ“ Node.js Ù†ØµØ¨ Ø§Ø³Øª
echo.

:: Ø¨Ø±Ø±Ø³ÛŒ npm
echo [2/5] Ø¨Ø±Ø±Ø³ÛŒ npm...
where npm >nul 2>&1
if errorlevel 1 (
    echo âœ— npm ÛŒØ§ÙØª Ù†Ø´Ø¯!
    pause
    exit /b 1
)
echo âœ“ npm Ù†ØµØ¨ Ø§Ø³Øª
echo.

:: Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡
echo [3/5] Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡ Android...
echo (Ø§ÛŒÙ† Ù…Ø±Ø­Ù„Ù‡ 2-3 Ø¯Ù‚ÛŒÙ‚Ù‡ Ø·ÙˆÙ„ Ù…ÛŒâ€ŒÚ©Ø´Ø¯)
echo.

if not exist "android\" (
    call npx expo prebuild --platform android --clean
    if errorlevel 1 (
        echo.
        echo âœ— Ø®Ø·Ø§ Ø¯Ø± Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ!
        pause
        exit /b 1
    )
) else (
    echo âœ“ Ù¾Ø±ÙˆÚ˜Ù‡ Ø§Ø² Ù‚Ø¨Ù„ Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø³Øª
)
echo.

:: Ø¨Ø±Ø±Ø³ÛŒ Java
echo [4/5] Ø¨Ø±Ø±Ø³ÛŒ Java JDK...
where java >nul 2>&1
if errorlevel 1 (
    echo âš  Java JDK ÛŒØ§ÙØª Ù†Ø´Ø¯!
    echo.
    echo Ø¨Ø±Ø§ÛŒ Ø³Ø§Ø®Øª APK Ù†ÛŒØ§Ø² Ø¨Ù‡ Java JDK 17 Ø¯Ø§Ø±ÛŒØ¯:
    echo https://adoptium.net/temurin/releases/
    echo.
    echo Ø¢ÛŒØ§ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø¨Ø¯ÙˆÙ† Java Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ù‡ÛŒØ¯ØŸ
    echo (Ù…Ù…Ú©Ù† Ø§Ø³Øª Ø¨Ø§ Ø®Ø·Ø§ Ù…ÙˆØ§Ø¬Ù‡ Ø´ÙˆÛŒØ¯)
    pause
) else (
    java -version 2>&1 | findstr /i "version" >nul
    if errorlevel 1 (
        echo âš  Ù†Ø³Ø®Ù‡ Java Ù‚Ø§Ø¨Ù„ ØªØ´Ø®ÛŒØµ Ù†ÛŒØ³Øª
    ) else (
        echo âœ“ Java Ù†ØµØ¨ Ø§Ø³Øª
    )
)
echo.

:: Ø³Ø§Ø®Øª APK
echo [5/5] Ø³Ø§Ø®Øª APK...
echo (Ø§ÛŒÙ† Ù…Ø±Ø­Ù„Ù‡ 5-10 Ø¯Ù‚ÛŒÙ‚Ù‡ Ø·ÙˆÙ„ Ù…ÛŒâ€ŒÚ©Ø´Ø¯)
echo Ù„Ø·ÙØ§Ù‹ ØµØ¨Ø± Ú©Ù†ÛŒØ¯ Ùˆ Ù¾Ù†Ø¬Ø±Ù‡ Ø±Ø§ Ù†Ø¨Ù†Ø¯ÛŒØ¯...
echo.
echo Ø´Ø±ÙˆØ¹: %time%
echo.

cd android
call gradlew.bat assembleRelease --no-daemon --warning-mode none
set BUILD_RESULT=%errorlevel%
cd ..

echo.
echo Ù¾Ø§ÛŒØ§Ù†: %time%
echo.

if %BUILD_RESULT% neq 0 (
    cls
    echo.
    echo â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
    echo â•‘                    âœ— Ø®Ø·Ø§ Ø¯Ø± Ø³Ø§Ø®Øª APK                â•‘
    echo â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    echo.
    echo Ø§Ø­ØªÙ…Ø§Ù„Ø§Ù‹ Ù…Ø´Ú©Ù„ Ø§Ø² ÛŒÚ©ÛŒ Ø§Ø² Ø§ÛŒÙ† Ù…ÙˆØ§Ø±Ø¯ Ø§Ø³Øª:
    echo.
    echo 1. Java JDK Ù†ØµØ¨ Ù†ÛŒØ³Øª
    echo    Ø¯Ø§Ù†Ù„ÙˆØ¯: https://adoptium.net/
    echo.
    echo 2. Ù†Ø³Ø®Ù‡ Java Ù‚Ø¯ÛŒÙ…ÛŒ Ø§Ø³Øª (Ø¨Ø§ÛŒØ¯ 17 ÛŒØ§ Ø¨Ø§Ù„Ø§ØªØ± Ø¨Ø§Ø´Ø¯)
    echo.
    echo 3. Ù…ØªØºÛŒØ± Ù…Ø­ÛŒØ·ÛŒ JAVA_HOME ØªÙ†Ø¸ÛŒÙ… Ù†Ø´Ø¯Ù‡
    echo.
    echo 4. Android SDK Ù†ØµØ¨ Ù†ÛŒØ³Øª
    echo    Ø¯Ø§Ù†Ù„ÙˆØ¯: https://developer.android.com/studio
    echo.
    echo â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    echo.
    echo Ø¨Ø±Ø§ÛŒ Ú©Ù…Ú© Ø¨ÛŒØ´ØªØ±ØŒ ÙØ§ÛŒÙ„ MANUAL_STEPS.txt Ø±Ø§ Ø¨Ø¨ÛŒÙ†ÛŒØ¯
    echo.
    pause
    exit /b 1
)

:: Ø¨Ø±Ø±Ø³ÛŒ APK
if not exist "android\app\build\outputs\apk\release\app-release.apk" (
    echo âœ— ÙØ§ÛŒÙ„ APK Ø³Ø§Ø®ØªÙ‡ Ù†Ø´Ø¯!
    echo.
    pause
    exit /b 1
)

:: Ù…ÙˆÙÙ‚ÛŒØª!
cls
echo.
echo â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
echo â•‘                                                       â•‘
echo â•‘           âœ“âœ“âœ“ APK Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯! âœ“âœ“âœ“          â•‘
echo â•‘                                                       â•‘
echo â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.
echo ðŸ“ Ù…Ø³ÛŒØ± ÙØ§ÛŒÙ„:
echo    %CD%\android\app\build\outputs\apk\release\
echo.
echo ðŸ“¦ Ù†Ø§Ù… ÙØ§ÛŒÙ„:
echo    app-release.apk
echo.
echo ðŸ“Š Ø­Ø¬Ù… ÙØ§ÛŒÙ„:
for %%A in ("android\app\build\outputs\apk\release\app-release.apk") do (
    set /a SIZE_B=%%~zA
    set /a SIZE_KB=%%~zA/1024
    set /a SIZE_MB=%%~zA/1024/1024
    echo    !SIZE_B! Ø¨Ø§ÛŒØª (ØªÙ‚Ø±ÛŒØ¨Ø§Ù‹ !SIZE_MB! Ù…Ú¯Ø§Ø¨Ø§ÛŒØª^)
)
echo.
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.
echo ðŸ“± Ù†Ø­ÙˆÙ‡ Ù†ØµØ¨ Ø±ÙˆÛŒ Ú¯ÙˆØ´ÛŒ:
echo.
echo   1ï¸âƒ£  ÙØ§ÛŒÙ„ app-release.apk Ø±Ø§ Ø¨Ù‡ Ú¯ÙˆØ´ÛŒ Ù…Ù†ØªÙ‚Ù„ Ú©Ù†ÛŒØ¯
echo       â€¢ Ø§Ø² Ø·Ø±ÛŒÙ‚ Ú©Ø§Ø¨Ù„ USB
echo       â€¢ ÛŒØ§ ØªÙ„Ú¯Ø±Ø§Ù… Saved Messages
echo       â€¢ ÛŒØ§ Ø¨Ù„ÙˆØªÙˆØ«
echo.
echo   2ï¸âƒ£  Ø¯Ø± Ú¯ÙˆØ´ÛŒ: ØªÙ†Ø¸ÛŒÙ…Ø§Øª ^> Ø§Ù…Ù†ÛŒØª ^> Ù…Ù†Ø§Ø¨Ø¹ Ù†Ø§Ù…Ø¹Ù„ÙˆÙ…
echo       Ø±Ø§ ÙØ¹Ø§Ù„ Ú©Ù†ÛŒØ¯
echo.
echo   3ï¸âƒ£  Ø±ÙˆÛŒ ÙØ§ÛŒÙ„ APK Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯
echo.
echo   4ï¸âƒ£  Ø¯Ú©Ù…Ù‡ "Ù†ØµØ¨" Ø±Ø§ Ø¨Ø²Ù†ÛŒØ¯
echo.
echo   5ï¸âƒ£  Ø§Ø² Ø¨Ø±Ù†Ø§Ù…Ù‡ "Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ø§Ù„ÛŒ" Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯! ðŸŽ‰
echo.
echo â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.

:: Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ù¾ÙˆØ´Ù‡
echo Ù¾ÙˆØ´Ù‡ Ø­Ø§ÙˆÛŒ APK Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø² Ø´Ø¯Ù†...
timeout /t 2 >nul
start "" explorer "%CD%\android\app\build\outputs\apk\release\"

echo.
echo âœ“ ØªÙ…Ø§Ù…!
echo.
pause
